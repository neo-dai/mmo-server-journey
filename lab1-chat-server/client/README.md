# Echo Client (C++)

一个简化的 C++ Echo 客户端，用于连接 Echo 服务器并测试 Echo 功能。

## 功能特性

- ✅ TCP Socket 客户端
- ✅ 连接到 Echo 服务器
- ✅ 交互式消息发送
- ✅ 请求-响应模式：发送后等待回显（简化版本，适合学习）
- ✅ 支持自定义服务器地址和端口

## 学习重点

这个简化版本专注于 Socket 编程的基础知识：
- Socket 创建和配置
- 连接到服务器
- 数据收发（send/recv）
- 请求-响应模式

**注意**：这是简化版本，采用请求-响应模式（发送后等待接收）。双全工通信将在后续版本中学习。

## 编译

### 使用 CMake

```bash
mkdir build
cd build
cmake ..
make
```

### 手动编译

```bash
g++ -std=c++11 -o echo_client echo_client.cpp
```

## 运行

```bash
./echo_client [服务器IP] [端口号]
```

参数说明：
- `服务器IP`：服务器地址，默认为 `127.0.0.1`
- `端口号`：服务器端口，默认为 `8080`

示例：

```bash
# 使用默认地址和端口（127.0.0.1:8080）
./echo_client

# 指定服务器地址
./echo_client 192.168.1.100

# 指定服务器地址和端口
./echo_client 192.168.1.100 3000
```

## 使用方法

1. 启动客户端后，连接到服务器
2. 输入消息并按回车发送
3. 等待服务器回显（自动接收）
4. 输入 `quit` 或 `exit` 退出客户端

示例会话：

```
=== Echo Client ===
输入消息发送到服务器（输入 'quit' 或 'exit' 退出）
========================================
[客户端] 已连接到服务器: 127.0.0.1:8080
Hello, Server!
[客户端] 已发送: Hello, Server!
[客户端] 收到回显: Hello, Server!
This is a test message
[客户端] 已发送: This is a test message
[客户端] 收到回显: This is a test message
quit
[客户端] 已断开连接
```

## 测试流程

1. **启动服务器**（在另一个终端）：
   ```bash
   cd ../server/build
   ./echo_server
   ```

2. **启动客户端**：
   ```bash
   cd ../client/build
   ./echo_client
   ```

3. **发送消息测试**：
   - 在客户端输入任意消息
   - 观察服务器和客户端的日志输出
   - 验证消息是否正确回显

## 架构说明

- **单线程模型**：客户端在主线程中处理用户输入和消息接收
- **请求-响应模式**：发送消息后，立即等待接收服务器回显
- **顺序处理**：一次只能处理一条消息的发送和接收

## 代码结构

代码采用简单的函数式结构，易于理解：
1. 创建 socket
2. 连接到服务器
3. 循环处理：
   - 获取用户输入
   - 发送消息
   - 等待接收回显
   - 显示回显
4. 关闭连接

## 下一步

- [ ] 添加双全工通信支持（多线程版本）
- [ ] 添加 JSON 消息协议支持
- [ ] 实现消息历史记录
- [ ] 添加连接重试机制
- [ ] 支持命令行模式（非交互式）
